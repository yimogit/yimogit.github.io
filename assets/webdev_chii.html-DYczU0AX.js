import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,e,o as t}from"./app-CS3knfL2.js";const n="/assets/662652-20230918213059385-844919012-MlwjQK0n.png",l="/assets/662652-20230918213446720-1026304554-BgOm9uFB.png",h="/assets/662652-20230918212353962-1606032919-GQxx0Mr2.png",p="/assets/662652-20230918212825159-1515083097-czXWcHa5.png",k="/assets/662652-20230918215104674-1150121918-hSlzY1AG.png",r={};function d(c,i){return t(),a("div",null,i[0]||(i[0]=[e('<h2 id="前端远程调试方案-chii-的使用经验分享" tabindex="-1"><a class="header-anchor" href="#前端远程调试方案-chii-的使用经验分享"><span>前端远程调试方案 Chii 的使用经验分享</span></a></h2><blockquote><p>Chii 是与 weinre 一样的远程调试工具 ，主要是将 web inspector 替换为最新的 chrome devtools frontend<br> 监控列表页面可以看到网站的标题链接，IP，useragent，可以快速定位调试页面，监控页信息完善，支持https请求等，开发者工具能看到的都能看到。 本文主要介绍其使用，在电脑运行，通过注入 js 的方式将将远端的日志，请求等同步推送在电脑端查看显示，及命令的执行</p></blockquote><p>项目地址：https://github.com/liriliri/chii</p><h3 id="运行监控一览" tabindex="-1"><a class="header-anchor" href="#运行监控一览"><span>运行监控一览</span></a></h3><ul><li>启动 <img src="'+n+'" alt="" loading="lazy"></li><li>nginx配置 <img src="'+l+'" alt="" loading="lazy"></li><li>监控列表 <img src="'+h+'" alt="" loading="lazy"></li><li>监控页 <img src="'+p+`" alt="" loading="lazy"></li></ul><h3 id="chii-安装" tabindex="-1"><a class="header-anchor" href="#chii-安装"><span>Chii 安装</span></a></h3><p>使用 npm 安装</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> chii</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -g</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="chii-运行及转发配置" tabindex="-1"><a class="header-anchor" href="#chii-运行及转发配置"><span>Chii 运行及转发配置</span></a></h3><ul><li><p>如果是本地直接运行即可：<code>chii start -p 8082</code></p></li><li><p>考虑到可能存在的跨域情况，可参考如下配置运行使用</p></li><li><p>生产环境运行：<code>chii start -p 8082 --base-path /chii -d xxxx.xxxx.xxx.com</code></p><ul><li>结合前缀和域名，不影响生产环境访问，也可以使用生产环境域名访问到chii服务</li><li><code>-p</code> 端口</li><li><code>-base-path</code> 前缀</li><li><code>-d</code> 域名</li><li><a href="https://github.com/liriliri/chii/blob/master/bin/chii.js" target="_blank" rel="noopener noreferrer">更多参数见源码</a></li></ul></li><li><p>配置转发</p><ul><li>若需要调试的网站域名是：xxxx.xxxx.xxx.com，则 nginx 配置其转发 xxxx.xxxx.xxx.com/chii/</li><li>如果网站是 https 则将注释处放开</li></ul></li></ul><div class="language-nginx line-numbers-mode" data-highlighter="shiki" data-ext="nginx" data-title="nginx" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">real_ip_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">X-Real-IP;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    #location / {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    #    ....</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    #}</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    location</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /chii/ {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            real_ip_recursive </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Host $</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">http_host</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            # 运行chii的本地地址</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            proxy_pass </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">http://192.168.0.188:8082/chii/;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">X-Real-IP  $</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">remote_addr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Host-Real-IP  $</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">http_host</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            #https则将下面注释的放开</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            #proxy_set_header X-Forwarded-Proto &quot;https&quot;;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            #proxy_set_header X-Forwarded-Ssl on;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">X-Forwarded-For $</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">proxy_add_x_forwarded_for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            proxy_http_version </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Upgrade $</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">http_upgrade</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            proxy_set_header </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Connection </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;upgrade&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问：https://xxxx.xxxx.xxx.com/chii/ 即可打开调试监控</p><h3 id="chii-注入-js-转发开始调试" tabindex="-1"><a class="header-anchor" href="#chii-注入-js-转发开始调试"><span>chii 注入 js 转发开始调试</span></a></h3><ul><li><a href="https://github.com/liriliri/chii/blob/master/test/demo.js#L175" target="_blank" rel="noopener noreferrer">注入 js 参考</a></li></ul><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//注意替换其中的域名</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> injectTarget</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> e</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> document</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createElement</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;script&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">src</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;//xxxx.xxxx.xxx.com/chii/target.js&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  location</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">href</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">indexOf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;embedded=true&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> &amp;&amp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;embedded&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;true&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  location</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">href</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">indexOf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;cdn=true&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> &amp;&amp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">setAttribute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;cdn&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;//cdn.jsdelivr.net/npm/chii/public&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  document</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">head</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">appendChild</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">injectTarget</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将其加入到页面中即可，可以通过 query 参数获其他接口参数控制来是否启用 另外如果是要在高速上给火车换轮子：给生产环境运行中的单页应用中使用思路,可参考下面命令 复制一个 html，然后注入，访问 test.html 即可</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># nginx容器内部路径，根据实际情况调整</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/share/nginx/html/index.html</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/share/nginx/html/test.html</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;&lt;script&gt;function injectTarget(){var e=document.createElement(&#39;script&#39;);e.src=&#39;//xxxx.xxxx.xxx.com/chii/target.js&#39;;location.href.indexOf(&#39;embedded=true&#39;)&gt;-1&amp;&amp;(e.setAttribute(&#39;embedded&#39;,&#39;true&#39;));location.href.indexOf(&#39;cdn=true&#39;)&gt;-1&amp;&amp;e.setAttribute(&#39;cdn&#39;,&#39;//cdn.jsdelivr.net/npm/chii/public&#39;);document.head.appendChild(e)}injectTarget();&lt;/script&gt;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/usr/share/nginx/html/test.html</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="其他调试方案与工具" tabindex="-1"><a class="header-anchor" href="#其他调试方案与工具"><span>其他调试方案与工具</span></a></h2><h3 id="vconsole" tabindex="-1"><a class="header-anchor" href="#vconsole"><span>vConsole</span></a></h3><p>项目地址：https://github.com/Tencent/vConsole</p><blockquote><p>一个轻量、可拓展、针对手机网页的前端开发者调试面板。<br> vConsole 是框架无关的，可以在 Vue、React 或其他任何框架中使用。<br> 现在 vConsole 是微信小程序的官方调试工具。 注入 js,会显示一个图标，可以在设备端查看日志等信息</p></blockquote><ul><li>vConsole 的安装使用</li></ul><p>最简单的方式是使用 cdn 引入然后初始化</p><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" data-title="html" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> src</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://unpkg.com/vconsole@latest/dist/vconsole.min.js&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // VConsole 默认会挂载到 \`window.VConsole\` 上</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> vConsole</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> window</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">VConsole</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再或者需要先加载 vConsole 也可以使用 sed 命令替换标题注入 js</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/share/nginx/html/index.html</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/share/nginx/html/test.html</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s#&lt;title&gt;xxxxx&lt;/title&gt;#&lt;script src=&quot;https://unpkg.com/vconsole@latest/dist/vconsole.min.js&quot;&gt;&lt;/script&gt;\\n&lt;script&gt;\\n  var vConsole = new window.VConsole();\\n&lt;/script&gt;#&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./test.html</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>运行后如图所示 <img src="`+k+'" alt="" loading="lazy"></li></ul><h3 id="weinre-的安装使用" tabindex="-1"><a class="header-anchor" href="#weinre-的安装使用"><span>weinre 的安装使用</span></a></h3><p>项目地址：<a href="https://people.apache.org/~pmuellr/weinre/docs/latest/Home.html" target="_blank" rel="noopener noreferrer">weinre</a></p><blockquote><p>一款基于 Web 开发的远程调试工具。是 Apache Cordova 项目的一部分。 经常有断线情况，不再维护，不再推荐</p></blockquote><ul><li>安装</li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">npm</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> weinre</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>启动</li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">weinre</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --httpPort</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 9090</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --boundHost</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -all-</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>注入 js</li></ul><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" data-title="html" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> src</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://localhost:9090/target/target-script-min.js#anonymous&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>当访问调试页面时打开 http://localhost:9090/client/#anonymous 接口查看到被调试的页面监控链接，访问即可</p><h3 id="sentry" tabindex="-1"><a class="header-anchor" href="#sentry"><span>sentry</span></a></h3><blockquote><p>是一种开源的错误跟踪和监控解决方案，用于帮助开发者及时发现、修复和预防应用程序中的错误和异常。 集成容易，但是用好还是不容易，一些关键性的日志及设置用户上下文的使用还是蛮重要的 安装使用可以参考<a href="https://juejin.cn/post/7275980024262443068" target="_blank" rel="noopener noreferrer">这篇文章</a></p></blockquote><h2 id="写在最后" tabindex="-1"><a class="header-anchor" href="#写在最后"><span>写在最后</span></a></h2><p>文章始于客户反馈产品移动端白屏，因为是在生产环境，故想办法尝试了下chii，用chii排除了一些错误答案，生产环境还是需要反馈用户的积极配合才行<br> 目前只能是用sentry记录下关键性日志分析了，虽然因客户没有时间来配合最后也没有解决问题，但感觉体验还是蛮好的，特此分享一二。</p>',41)]))}const A=s(r,[["render",d],["__file","webdev_chii.html.vue"]]),y=JSON.parse('{"path":"/posts/web/webdev_chii.html","title":"前端远程调试方案 Chii 的使用经验分享","lang":"zh-CN","frontmatter":{"title":"前端远程调试方案 Chii 的使用经验分享","date":"2023-09-18T21:55:00.000Z","category":["Web"],"tag":["vue","web开发","伪前端"],"description":"前端远程调试方案 Chii 的使用经验分享 Chii 是与 weinre 一样的远程调试工具 ，主要是将 web inspector 替换为最新的 chrome devtools frontend 监控列表页面可以看到网站的标题链接，IP，useragent，可以快速定位调试页面，监控页信息完善，支持https请求等，开发者工具能看到的都能看到。 本文...","head":[["meta",{"property":"og:url","content":"https://www.yimo.link/posts/web/webdev_chii.html"}],["meta",{"property":"og:site_name","content":"易墨网"}],["meta",{"property":"og:title","content":"前端远程调试方案 Chii 的使用经验分享"}],["meta",{"property":"og:description","content":"前端远程调试方案 Chii 的使用经验分享 Chii 是与 weinre 一样的远程调试工具 ，主要是将 web inspector 替换为最新的 chrome devtools frontend 监控列表页面可以看到网站的标题链接，IP，useragent，可以快速定位调试页面，监控页信息完善，支持https请求等，开发者工具能看到的都能看到。 本文..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-28T11:15:42.000Z"}],["meta",{"property":"article:tag","content":"vue"}],["meta",{"property":"article:tag","content":"web开发"}],["meta",{"property":"article:tag","content":"伪前端"}],["meta",{"property":"article:published_time","content":"2023-09-18T21:55:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-10-28T11:15:42.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"前端远程调试方案 Chii 的使用经验分享\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-09-18T21:55:00.000Z\\",\\"dateModified\\":\\"2024-10-28T11:15:42.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"易墨\\",\\"url\\":\\"https://www.yimo.link\\"}]}"]]},"headers":[{"level":2,"title":"前端远程调试方案 Chii 的使用经验分享","slug":"前端远程调试方案-chii-的使用经验分享","link":"#前端远程调试方案-chii-的使用经验分享","children":[{"level":3,"title":"运行监控一览","slug":"运行监控一览","link":"#运行监控一览","children":[]},{"level":3,"title":"Chii 安装","slug":"chii-安装","link":"#chii-安装","children":[]},{"level":3,"title":"Chii 运行及转发配置","slug":"chii-运行及转发配置","link":"#chii-运行及转发配置","children":[]},{"level":3,"title":"chii 注入 js 转发开始调试","slug":"chii-注入-js-转发开始调试","link":"#chii-注入-js-转发开始调试","children":[]}]},{"level":2,"title":"其他调试方案与工具","slug":"其他调试方案与工具","link":"#其他调试方案与工具","children":[{"level":3,"title":"vConsole","slug":"vconsole","link":"#vconsole","children":[]},{"level":3,"title":"weinre 的安装使用","slug":"weinre-的安装使用","link":"#weinre-的安装使用","children":[]},{"level":3,"title":"sentry","slug":"sentry","link":"#sentry","children":[]}]},{"level":2,"title":"写在最后","slug":"写在最后","link":"#写在最后","children":[]}],"git":{"createdTime":1730114142000,"updatedTime":1730114142000,"contributors":[{"name":"yimo","email":"yimo@wikiglobal.com","commits":1}]},"readingTime":{"minutes":3.96,"words":1188},"filePathRelative":"posts/web/webdev_chii.md","localizedDate":"2023年9月18日","excerpt":"<h2>前端远程调试方案 Chii 的使用经验分享</h2>\\n<blockquote>\\n<p>Chii 是与 weinre 一样的远程调试工具 ，主要是将 web inspector 替换为最新的 chrome devtools frontend<br>\\n监控列表页面可以看到网站的标题链接，IP，useragent，可以快速定位调试页面，监控页信息完善，支持https请求等，开发者工具能看到的都能看到。\\n本文主要介绍其使用，在电脑运行，通过注入 js 的方式将将远端的日志，请求等同步推送在电脑端查看显示，及命令的执行</p>\\n</blockquote>\\n<p>项目地址：https://github.com/liriliri/chii</p>","autoDesc":true}');export{A as comp,y as data};

import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,e as l,o as a}from"./app-Co1zYae_.js";const s="/assets/662652-20231001131304778-1402667353-D7edDl4R.png",t="/assets/662652-20231001131304700-1666268203-1PHvARhx.png",o="/assets/662652-20231001131304867-1898670234-DUAgiY1p.png",p="/assets/662652-20231001131304791-1643947025-CQaGZ_0N.png",r="/assets/662652-20231001131304774-1874558709-CuInshoZ.png",c="/assets/662652-20231001131304806-1960908709-Cbin4E0s.png",d="/assets/662652-20231001131304998-895327675-CJN3_ga6.png",h="/assets/662652-20231001131304964-1463516001-CdxrS7A-.png",m="/assets/662652-20231001131304988-1963601136-Ds1lAgPT.png",g="/assets/662652-20231001195002590-91562048-CRXjbESH.png",u="/assets/662652-20231007191247465-1174371048-D1up_exg.png",b="/assets/662652-20231007191247562-224155067-v9Sr7MUj.png",v="/assets/662652-20231007191247617-456534953-D3zgPgYB.png",y="/assets/662652-20231007191247432-340320673-CURoK_eh.png",f="/assets/662652-20231007191247601-669877205-CA83UKxn.png",k={};function _(O,e){return a(),n("div",null,e[0]||(e[0]=[l('<h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h2><ul><li>Hyper-V 安装文档：<a href="https://learn.microsoft.com/zh-cn/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v" target="_blank" rel="noopener noreferrer">在 Windows 10 上安装 Hyper-V</a></li><li>CentOS 系统下载：<a href="https://mirrors.aliyun.com/centos/8.5.2111/isos/x86_64/" target="_blank" rel="noopener noreferrer">CentOS 国内镜像源 8.5.2111</a></li><li>作者：<a href="https://github.com/yimogit" target="_blank" rel="noopener noreferrer">易墨</a></li><li>发布时间：2023.10.01</li><li>原文地址：https://www.cnblogs.com/morang/p/devops-hyperv-centos-install.html</li></ul><h2 id="使用命令安装" tabindex="-1"><a class="header-anchor" href="#使用命令安装"><span>使用命令安装</span></a></h2><p>以管理员身份运行 PowerShell 命令：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>Yes 将会重启</p></blockquote><h2 id="配置虚拟机网络" tabindex="-1"><a class="header-anchor" href="#配置虚拟机网络"><span>配置虚拟机网络</span></a></h2><ul><li>创建虚拟交换机-外部-DevOpsNetworkSwitch</li></ul><figure><img src="'+s+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="创建虚拟机" tabindex="-1"><a class="header-anchor" href="#创建虚拟机"><span>创建虚拟机</span></a></h2><p>重启完成后按 Windows 或从开始菜单中找到 Hyper-V 启动开始创建虚拟机</p><ol><li><p>指定名称：devops01</p></li><li><p>指定目录：F:\\HyperV\\devops01\\</p></li><li><p>代数：第一代</p><ol><li><blockquote><p>虽然第二代有更好的安全性、可靠性和灵活性，但不能丝滑的启动！！！</p><p>第二代启动连接时会报<a href="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/U5nwbnTdqouh5fxz90xc3GIZnud/?fallback_source=1&amp;height=1280&amp;mount_node_token=S7Mvd9nQwotVOHxYB4RcSGugnZg&amp;mount_point=docx_image&amp;policy=equal&amp;width=1280" target="_blank" rel="noopener noreferrer">UEFI 相关的错</a>，虽然有方案解决，但我选第一代。</p></blockquote></li></ol></li><li><p>启动内存：8096M , 不启用动态内存</p><ol><li><blockquote><p>动态内存是一种虚拟化技术，在物理内存不足时可以自动调整分配给虚拟机的内存大小。</p><p>动态内存可能会引入一定的性能开销，对于需要稳定的应用场景，不适合启用动态内存。</p></blockquote></li></ol></li><li><p>网络连接：DevOpsNetworkSwitch</p><ol><li><blockquote><p>上一步创建的外部网络交换机，选择后能够获取局域网 IP 进行联网</p><p>如果只在虚拟机之间进行通信或单个主机上运行多个虚拟机，可以选择内部网络。如果您需要让虚拟机连接到外部网络并与其他设备进行通信，就需要选择外部网络。</p><p>在使用外部网络时，需要分配 IP 地址和子网掩码，并配置默认网关、DNS 服务器等网络参数。</p></blockquote></li></ol></li><li><p>创建虚拟硬盘(100G)：F:\\HyperV\\devops01\\devops01\\Virtual Hard Disks\\</p></li><li><p>选择操作系统：F:\\HyperVOs\\CentOS-8.5.2111-x86_64-dvd1.iso <a href="https://mirrors.aliyun.com/centos/8.5.2111/isos/x86_64/CentOS-8.5.2111-x86_64-dvd1.iso" target="_blank" rel="noopener noreferrer">centos8.5.2111 DVD 版 10G aliyun</a></p><ol><li><blockquote><p>DVD 版本：完整的安装镜像，包含了完整的软件包集合和安装工具</p></blockquote></li><li><blockquote><p>Boot 版本：仅包含了用于启动和引导 CentOS 安装程序的最小必需的文件和工具。通过网络下载剩余的软件包</p><p>版本选择：CentOS 8.5.2111 提供更长时间的支持，直到 2029 年 11 月 30 日</p></blockquote></li></ol></li><li><p>确认信息完成创建</p><ol><li><img src="'+t+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ol></li></ol><h2 id="安装-centos-8-5-2111" tabindex="-1"><a class="header-anchor" href="#安装-centos-8-5-2111"><span>安装 CentOS 8.5.2111</span></a></h2><ol><li><p>启动并连接到虚拟机 devops01</p><ol><li><img src="'+o+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ol></li><li><p>设置安装向导</p><ol><li><blockquote><p><strong>LOCALIZATION</strong></p><p>Keyboard 　　　　　　键盘布局</p><p>Language Support 　　语言支持</p><p>Time &amp;Date 　　　　　时间日期设置</p><p><strong>SOFTWARE</strong></p><p>Installation Source 　　安装来源</p><p>Software Selection 　　软件选择（这里可以选择安装是带 gui 桌面和最小化安装之类的）</p><p><strong>SYSTEM</strong></p><p>INSTALLATION DESTINATION 　安装位置</p><p>KDUMP（默认）　　　　　　　　 KDUMP 用来监控内核崩溃的时候用的,基本上没有,禁用</p><p>Network &amp;Host NAME 　　　　　　网络和主机名</p><p>Security Policy 　　　　　　　　　 安全策略</p><p><strong>USER SETTINGS</strong>　　用户设置</p><p>Root Password 　　 root 密码</p><p>User Creation 　　创建用户</p></blockquote></li></ol></li><li><p>选择键盘布局：默认英文就好，不要选中文</p></li><li><p>设置时区：Asia shanghai</p></li><li><p>设置安装源：默认即可</p><ol><li><blockquote><p>如果使用的 8.4.2105-x86_64-boot 版本，可以先在这里设置 On the network 阿里云的包源：http://mirrors.aliyun.com/centos/8/BaseOS/x86_64/os/</p></blockquote></li></ol></li><li><p>选择软件安装：最小化安装 Minimal Install</p><ol><li><img src="'+p+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ol></li><li><p>设置分区：不会分就先不分</p></li><li><p>设置网络：根据自己本地的 IP 信息来配置</p><ol><li><blockquote><p>也可以安装完再配置，这里我本机的 IP 时 192.168.123.201，网关时 192.168.123.1，子网掩码：255.255.255.0，配置</p></blockquote></li><li><img src="'+r+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li><li><img src="'+c+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ol></li><li><p>设置 root 密码：devops666</p></li><li><p>安装完成后重启即可</p><ol><li><img src="'+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ol></li><li><p>网络测试</p><ol><li>查看 IP：<code>ip add show</code></li><li><img src="'+h+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li><li>访问百度：<code>curl https://www.baidu.com</code></li><li><img src="'+m+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ol></li></ol><h2 id="使用-mobaxterm-连接服务器" tabindex="-1"><a class="header-anchor" href="#使用-mobaxterm-连接服务器"><span>使用 MobaxTerm 连接服务器</span></a></h2><blockquote><p>一款功能强大的全功能终端软件，它集成了远程连接、X11 转发和远程桌面等多种功能</p></blockquote><p>官网下载：https://mobaxterm.mobatek.net/download.html</p><p>中文汉化版：https://github.com/RipplePiam/MobaXterm-Chinese-Simplified</p><p>授权码生成:https://github.com/malaohu/MobaXterm-GenKey</p><p>下载后直接运行即可</p><p>创建文件夹 devops，并创建会话，使用 root+devops666 即可连接到刚刚超级的虚拟机 192.168.123.214</p><figure><img src="'+g+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="网卡配置" tabindex="-1"><a class="header-anchor" href="#网卡配置"><span>网卡配置</span></a></h2><p>将地址修改为静态地址，固定 IP，防止 IP 重新分配</p><p><code>vi /etc/sysconfig/network-scripts/ifcfg-eth0</code></p><p>修改 <code>BOOTPROTO=dhcp</code> 为 <code>BOOTPROTO=static</code></p><p>重启网络生效：<code>systemctl restart NetworkManager</code></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>TYPE=Ethernet</span></span>
<span class="line"><span>PROXY_METHOD=none</span></span>
<span class="line"><span>BROWSER_ONLY=no</span></span>
<span class="line"><span>BOOTPROTO=static</span></span>
<span class="line"><span>DEFROUTE=yes</span></span>
<span class="line"><span>IPV4_FAILURE_FATAL=no</span></span>
<span class="line"><span>IPV6INIT=yes</span></span>
<span class="line"><span>IPV6_AUTOCONF=yes</span></span>
<span class="line"><span>IPV6_DEFROUTE=yes</span></span>
<span class="line"><span>IPV6_FAILURE_FATAL=no</span></span>
<span class="line"><span>NAME=eth0</span></span>
<span class="line"><span>UUID=9dcfadf8-90a9-43a0-8c7b-27d4edc48c83</span></span>
<span class="line"><span>DEVICE=eth0</span></span>
<span class="line"><span>ONBOOT=yes</span></span>
<span class="line"><span>IPADDR=192.168.123.214</span></span>
<span class="line"><span>PREFIX=24</span></span>
<span class="line"><span>GATEWAY=192.168.123.1</span></span>
<span class="line"><span>IPV6_PRIVACY=no</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="软件源配置" tabindex="-1"><a class="header-anchor" href="#软件源配置"><span>软件源配置</span></a></h2><ol><li>使用 curl 下载包源配置到 /etc/yum.repos.d/CentOS-Base.repo</li><li>删除默认的包源配置文件 CentOS-Linux-AppStream.repo 和 CentOS-Linux-BaseOS.repo，</li><li>刷新软件包缓存</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-vault-8.5.2111.repo</span></span>
<span class="line"><span>rm /etc/yum.repos.d/CentOS-Linux-AppStream.repo -f</span></span>
<span class="line"><span>rm /etc/yum.repos.d/CentOS-Linux-BaseOS.repo -f</span></span>
<span class="line"><span>dnf clean all</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令"><span>常用命令</span></a></h2><ul><li><p>查看主机名：<code>hostnamectl status</code></p></li><li><p>修改主机名：<code>hostnamectl set-hostname devops02</code></p></li><li><p>查看版本：<code>cat /etc/redhat-release</code></p><ul><li><blockquote><p>CentOS Linux release 8.5.2111</p></blockquote></li></ul></li><li><p>查看网络信息：<code>ip a</code></p></li><li><p>查看网卡配置：<code>cat etc/sysconfig/network-scripts/ifcfg-eth0</code></p></li><li><p>重启网络：<code>systemctl restart NetworkManager</code></p></li></ul><h2 id="复制已经装好的虚拟机" tabindex="-1"><a class="header-anchor" href="#复制已经装好的虚拟机"><span>复制已经装好的虚拟机</span></a></h2><ol><li><p>导出装好的虚拟机：<code>F:\\HyperVBak</code></p><ol><li>将导出后的文件夹重命名为 devops_centos8_docker</li></ol></li><li><p>导入，并将其存储到 F:\\HyperV\\devops_centos8_docker\\以作为模板使用</p><ol><li><img src="`+u+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li><li><img src="'+b+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li><li><img src="'+v+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li><li><img src="'+y+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ol></li><li><p>修改主机名：<code>hostnamectl set-hostname devops02</code></p></li><li><p>修改固定 IP，UUID:<code>vi /etc/sysconfig/network-scripts/ifcfg-eth0</code></p><ol><li>可以先用 ping 192.168.123.216 确保 IP 未被占用，我这为啥跳过 215 就是因为占用了</li><li><img src="'+f+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ol></li><li><p>重启主机：<code>reboot</code></p></li><li><p>可以独立一个虚拟机作为模板主机，将 IP 设置为动态 IP，开机后使用 ip addr show 获得 IP 后就使用 MobaxTerm 连接操作更加方便</p></li></ol><h2 id="后语" tabindex="-1"><a class="header-anchor" href="#后语"><span>后语</span></a></h2><ul><li>安装&amp;记录耗时：3 小时</li><li>参考：<strong><a href="https://www.cnblogs.com/alexlv/p/14744558.html" target="_blank" rel="noopener noreferrer">Centos 8 安装</a></strong></li><li>如果有用的化，欢迎点赞收藏评论三连</li></ul>',37)]))}const w=i(k,[["render",_],["__file","hyper-install.html.vue"]]),C=JSON.parse('{"path":"/posts/devops/hyper-install.html","title":"Hyper-V 安装 CentOS 8.5","lang":"zh-CN","frontmatter":{"title":"Hyper-V 安装 CentOS 8.5","date":"2024-10-24T00:00:00.000Z","category":["DevOps"],"tag":["虚拟机","HyperV","CentOS"],"description":"前言 Hyper-V 安装文档：在 Windows 10 上安装 Hyper-V CentOS 系统下载：CentOS 国内镜像源 8.5.2111 作者：易墨 发布时间：2023.10.01 原文地址：https://www.cnblogs.com/morang/p/devops-hyperv-centos-install.html 使用命令安装 以...","head":[["meta",{"property":"og:url","content":"https://www.yimo.link/posts/devops/hyper-install.html"}],["meta",{"property":"og:site_name","content":"易墨网"}],["meta",{"property":"og:title","content":"Hyper-V 安装 CentOS 8.5"}],["meta",{"property":"og:description","content":"前言 Hyper-V 安装文档：在 Windows 10 上安装 Hyper-V CentOS 系统下载：CentOS 国内镜像源 8.5.2111 作者：易墨 发布时间：2023.10.01 原文地址：https://www.cnblogs.com/morang/p/devops-hyperv-centos-install.html 使用命令安装 以..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-24T05:43:53.000Z"}],["meta",{"property":"article:tag","content":"虚拟机"}],["meta",{"property":"article:tag","content":"HyperV"}],["meta",{"property":"article:tag","content":"CentOS"}],["meta",{"property":"article:published_time","content":"2024-10-24T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-10-24T05:43:53.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Hyper-V 安装 CentOS 8.5\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-10-24T00:00:00.000Z\\",\\"dateModified\\":\\"2024-10-24T05:43:53.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"易墨\\",\\"url\\":\\"https://www.yimo.link\\"}]}"]]},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"使用命令安装","slug":"使用命令安装","link":"#使用命令安装","children":[]},{"level":2,"title":"配置虚拟机网络","slug":"配置虚拟机网络","link":"#配置虚拟机网络","children":[]},{"level":2,"title":"创建虚拟机","slug":"创建虚拟机","link":"#创建虚拟机","children":[]},{"level":2,"title":"安装 CentOS 8.5.2111","slug":"安装-centos-8-5-2111","link":"#安装-centos-8-5-2111","children":[]},{"level":2,"title":"使用 MobaxTerm 连接服务器","slug":"使用-mobaxterm-连接服务器","link":"#使用-mobaxterm-连接服务器","children":[]},{"level":2,"title":"网卡配置","slug":"网卡配置","link":"#网卡配置","children":[]},{"level":2,"title":"软件源配置","slug":"软件源配置","link":"#软件源配置","children":[]},{"level":2,"title":"常用命令","slug":"常用命令","link":"#常用命令","children":[]},{"level":2,"title":"复制已经装好的虚拟机","slug":"复制已经装好的虚拟机","link":"#复制已经装好的虚拟机","children":[]},{"level":2,"title":"后语","slug":"后语","link":"#后语","children":[]}],"git":{"createdTime":1729680881000,"updatedTime":1729748633000,"contributors":[{"name":"yimo","email":"yimo@wikiglobal.com","commits":2}]},"readingTime":{"minutes":5.03,"words":1509},"filePathRelative":"posts/devops/hyper-install.md","localizedDate":"2024年10月24日","excerpt":"<h2>前言</h2>\\n<ul>\\n<li>Hyper-V 安装文档：<a href=\\"https://learn.microsoft.com/zh-cn/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">在 Windows 10 上安装 Hyper-V</a></li>\\n<li>CentOS 系统下载：<a href=\\"https://mirrors.aliyun.com/centos/8.5.2111/isos/x86_64/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">CentOS 国内镜像源 8.5.2111</a></li>\\n<li>作者：<a href=\\"https://github.com/yimogit\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">易墨</a></li>\\n<li>发布时间：2023.10.01</li>\\n<li>原文地址：https://www.cnblogs.com/morang/p/devops-hyperv-centos-install.html</li>\\n</ul>","autoDesc":true}');export{w as comp,C as data};

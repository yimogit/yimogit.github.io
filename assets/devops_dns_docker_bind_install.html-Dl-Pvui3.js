import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,e as s,o as a}from"./app-BHZ56IUu.js";const l="/assets/662652-20231101192358141-1444822385-Bo7zExJa.png",t="/assets/662652-20231101192358187-1154473550-P1Nadpgh.png",o="/assets/662652-20231101192358109-1362838443-B7cSBhGY.png",r="/assets/662652-20231101192358108-2134110151-2zUQWhxu.png",p="/assets/662652-20231101192358203-1040928216-BTWuOQNL.png",c="/assets/662652-20231101192358149-731770894-BQsubi-i.png",d="/assets/662652-20231101192358191-930141830-JAdashj5.png",m="/assets/662652-20231101192358418-405715523-Cpj3vtnR.png",h="/assets/662652-20231101192358799-1824176868-C69Qx1dc.png",g="/assets/662652-20231101192358218-578011080-CxbT79LW.png",b="/assets/662652-20231101192732632-577566523-DAqRPNx6.png",u="/assets/662652-20231101192358016-395398185-B0aEbVKp.png",k="/assets/662652-20231101192358113-669136775-Bs_bKpOF.png",v="/assets/662652-20231101192358132-220929004-DCmTv9dV.png",f={};function _(D,e){return a(),i("div",null,e[0]||(e[0]=[s(`<h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h2><blockquote><p>前面使用 nginx 代理转发了几个域名到服务器，但是每次添加一个域名都需要在客户端添加一行 hosts 文件，无疑是繁琐的，其中也提到可以使用 DNS 来实现自动解析域名 到指定服务器的功能，本篇将介绍开源 DNS 服务 docker-bind 的部署和使用</p></blockquote><h3 id="特点" tabindex="-1"><a class="header-anchor" href="#特点"><span>特点</span></a></h3><ul><li>docker-bind 是一个基于 BIND 与 Webmin 构建的 DNS 服务镜像</li><li>BIND 是实现互联网域名系统 （DNS） 协议的开源软件，用于搭建 DNS 服务。</li><li>Webmin 是一款开源的Web界面管理工具，用于浏览器远程管理服务器</li><li>开源免费， 配置丰富（复杂），成熟稳定，中文主题支持有限，提供了一些服务器管理功能（监控，远程命令等），资源占用和安全性在使用时需要注意</li></ul><h3 id="使用情况" tabindex="-1"><a class="header-anchor" href="#使用情况"><span>使用情况</span></a></h3><ul><li>功能多但是大多有其他的平替，单独使用可以，但是个人不建议在容器中使用</li><li>用了两天感觉还是太重了，换成 DnsServer 了，下篇分享</li></ul><h2 id="docker-bind-的安装使用" tabindex="-1"><a class="header-anchor" href="#docker-bind-的安装使用"><span>docker-bind 的安装使用</span></a></h2><h3 id="准备" tabindex="-1"><a class="header-anchor" href="#准备"><span>准备</span></a></h3><ul><li>版本：v9.16.1-20200524</li><li>docker 镜像：sameersbn/bind:9.16.1-20200524</li><li>默认端口映射：53:53/tcp 53:53/udp 10000:10000/tcp（53 端口为 DNS 服务使用，10000 为 Webmin 使用）</li><li>Webmin 访问：https://ip:10000 必须使用 https 访问</li></ul><h3 id="使用-docker-compose-安装" tabindex="-1"><a class="header-anchor" href="#使用-docker-compose-安装"><span>使用 Docker Compose 安装</span></a></h3><blockquote><p>本篇文章基于 Docker V24 及 Docker Compose V2，安装可以参考之前的<a href="https://juejin.cn/post/7283873796977197108" target="_blank" rel="noopener noreferrer">文章</a></p></blockquote><h4 id="配置说明" tabindex="-1"><a class="header-anchor" href="#配置说明"><span>配置说明</span></a></h4><ul><li>镜像版本：<code>sameersbn/bind:9.16.1-20200524</code></li><li>指定时区：<code>Asia/Shanghai</code></li><li>启用 Webmin 并指定 root 密码：<code>devops666</code></li><li>启用 SSL：默认值为 true，用 https 访问 webmin（https://ip:10000）</li><li>指定端口映射：53:53/tcp 53:53/udp 10000:10000/tcp（53 端口为 DNS 服务使用，10000 为 Webmin 端口）</li><li>挂载数据目录：<code>./data:/data</code></li><li>指定网络：devopsnetwork （<code>docker network create devopsnetwork</code>）</li></ul><h4 id="配置文件-compose-yml" tabindex="-1"><a class="header-anchor" href="#配置文件-compose-yml"><span>配置文件 compose.yml</span></a></h4><ul><li>准备好 compose.yml 拷贝到服务器</li><li>然后运行<code>docker compose up -d</code>即可</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>version: &#39;3.1&#39;</span></span>
<span class="line"><span>services:</span></span>
<span class="line"><span>  dns:</span></span>
<span class="line"><span>    image: sameersbn/bind:9.16.1-20200524</span></span>
<span class="line"><span>    container_name: dns_9_16</span></span>
<span class="line"><span>    restart: always</span></span>
<span class="line"><span>    environment:</span></span>
<span class="line"><span>      TZ : &#39;Asia/Shanghai&#39;</span></span>
<span class="line"><span>      ROOT_PASSWORD: devops666</span></span>
<span class="line"><span>      WEBMIN_ENABLED: true      </span></span>
<span class="line"><span>      WEBMIN_INIT_SSL_ENABLED: true</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>        - &#39;10000:10000/tcp&#39;</span></span>
<span class="line"><span>        - &#39;53:53/udp&#39;</span></span>
<span class="line"><span>        - &#39;53:53/tcp&#39;</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      - ./data:/data</span></span>
<span class="line"><span>    networks:</span></span>
<span class="line"><span>      - devopsnetwork</span></span>
<span class="line"><span></span></span>
<span class="line"><span>networks:</span></span>
<span class="line"><span>  devopsnetwork:</span></span>
<span class="line"><span>    external: true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="部署成功" tabindex="-1"><a class="header-anchor" href="#部署成功"><span>部署成功</span></a></h4><p>部署机器 IP：192.168.123.214</p><figure><img src="`+l+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>容器中资源占用情况</p><figure><img src="'+t+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="webmin-的使用" tabindex="-1"><a class="header-anchor" href="#webmin-的使用"><span>Webmin 的使用</span></a></h3><ul><li>部署成功后访问：https://192.168.123.214:10000 默认启用了 SSL，使用 https://ip:prot</li></ul><figure><img src="'+o+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><p>启用中文主题， 虽然支持有限，但聊胜于无</p><figure><img src="'+r+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p>有非常多的功能，监控，远程执行命令等，安装好自行体验即可</p></li><li><p>目前需求是需要配置 dns 以将 test.com 解析到 192.168.123.214 中</p></li></ul><ol><li><p>服务器-&gt;BIND DNS Server-&gt;创建新的主区域</p><figure><img src="'+p+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="'+c+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p>现有DNS区域-&gt;地址-&gt;新增记录，可以使用通配符解析，新建后应用配置生效</p><figure><img src="'+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><img src="'+m+'" alt="" loading="lazy">   添加配置后记得应用配置</p><figure><img src="'+h+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p>本机设置 dns <code>192.168.123.214</code> 以及 <code>114.114.114.114</code>(不然无法访问其他网站)</p><figure><img src="'+g+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li><li><p>验证dns，正常ping test.com 的IP是存在的，现在就被解析到我们自己的dns了</p><p><img src="'+b+'" alt="" loading="lazy">   可能存在dns缓存，使用 <code>ipconfig /flushdns</code>刷新即可 <img src="'+u+'" alt="" loading="lazy"></p></li></ol><h3 id="踩过的坑" tabindex="-1"><a class="header-anchor" href="#踩过的坑"><span>踩过的坑</span></a></h3><ul><li>默认启用了 SSL，所以如果使用 http 会提示，使用 https 访问</li></ul><figure><img src="'+k+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li><p>Edge 如果禁用 https 初始化会提示：Error - No cookies Chrome 可以</p><ul><li><img src="'+v+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></li></ul></li><li><p>代理/VPN的设置不对可能导致 DNS 时好时坏，这个时候记得检查下代理，正常dns的生效都挺快的</p></li></ul><h3 id="相关文档" tabindex="-1"><a class="header-anchor" href="#相关文档"><span>相关文档</span></a></h3><ul><li>BIND官网：<a href="https://www.isc.org/bind" target="_blank" rel="noopener noreferrer">BIND</a></li><li>Webmin官网：<a href="http://www.webmin.com/" target="_blank" rel="noopener noreferrer">Webmin</a></li><li>项目地址：<a href="https://github.com/sameersbn/docker-bind" target="_blank" rel="noopener noreferrer">Github</a></li><li>镜像仓库：<a href="https://hub.docker.com/r/sameersbn/bind" target="_blank" rel="noopener noreferrer">DockerHub</a></li><li>安装参考：<a href="https://blog.csdn.net/qq_36961626/article/details/123314087" target="_blank" rel="noopener noreferrer">docker部署内网dns解析服务</a></li></ul><h2 id="后语" tabindex="-1"><a class="header-anchor" href="#后语"><span>后语</span></a></h2><blockquote><p>安装2分钟，文章写了一天，反复的尝试，理论的查询，时间飞逝</p></blockquote>',34)]))}const S=n(f,[["render",_],["__file","devops_dns_docker_bind_install.html.vue"]]),x=JSON.parse('{"path":"/posts/docker/devops_dns_docker_bind_install.html","title":"使用 Docker Compose 部署 DNS 服务 docker-bind 的经验分享","lang":"zh-CN","frontmatter":{"title":"使用 Docker Compose 部署 DNS 服务 docker-bind 的经验分享","date":"2023-11-04T08:00:00.000Z","category":["Docker"],"tag":["devops","docker","dns"],"description":"前言 前面使用 nginx 代理转发了几个域名到服务器，但是每次添加一个域名都需要在客户端添加一行 hosts 文件，无疑是繁琐的，其中也提到可以使用 DNS 来实现自动解析域名 到指定服务器的功能，本篇将介绍开源 DNS 服务 docker-bind 的部署和使用 特点 docker-bind 是一个基于 BIND 与 Webmin 构建的 DNS ...","head":[["meta",{"property":"og:url","content":"https://www.yimo.link/posts/docker/devops_dns_docker_bind_install.html"}],["meta",{"property":"og:site_name","content":"易墨网"}],["meta",{"property":"og:title","content":"使用 Docker Compose 部署 DNS 服务 docker-bind 的经验分享"}],["meta",{"property":"og:description","content":"前言 前面使用 nginx 代理转发了几个域名到服务器，但是每次添加一个域名都需要在客户端添加一行 hosts 文件，无疑是繁琐的，其中也提到可以使用 DNS 来实现自动解析域名 到指定服务器的功能，本篇将介绍开源 DNS 服务 docker-bind 的部署和使用 特点 docker-bind 是一个基于 BIND 与 Webmin 构建的 DNS ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-28T11:15:42.000Z"}],["meta",{"property":"article:tag","content":"devops"}],["meta",{"property":"article:tag","content":"docker"}],["meta",{"property":"article:tag","content":"dns"}],["meta",{"property":"article:published_time","content":"2023-11-04T08:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-10-28T11:15:42.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"使用 Docker Compose 部署 DNS 服务 docker-bind 的经验分享\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-11-04T08:00:00.000Z\\",\\"dateModified\\":\\"2024-10-28T11:15:42.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"易墨\\",\\"url\\":\\"https://www.yimo.link\\"}]}"]]},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[{"level":3,"title":"特点","slug":"特点","link":"#特点","children":[]},{"level":3,"title":"使用情况","slug":"使用情况","link":"#使用情况","children":[]}]},{"level":2,"title":"docker-bind 的安装使用","slug":"docker-bind-的安装使用","link":"#docker-bind-的安装使用","children":[{"level":3,"title":"准备","slug":"准备","link":"#准备","children":[]},{"level":3,"title":"使用 Docker Compose 安装","slug":"使用-docker-compose-安装","link":"#使用-docker-compose-安装","children":[{"level":4,"title":"配置说明","slug":"配置说明","link":"#配置说明","children":[]},{"level":4,"title":"配置文件 compose.yml","slug":"配置文件-compose-yml","link":"#配置文件-compose-yml","children":[]},{"level":4,"title":"部署成功","slug":"部署成功","link":"#部署成功","children":[]}]},{"level":3,"title":"Webmin 的使用","slug":"webmin-的使用","link":"#webmin-的使用","children":[]},{"level":3,"title":"踩过的坑","slug":"踩过的坑","link":"#踩过的坑","children":[]},{"level":3,"title":"相关文档","slug":"相关文档","link":"#相关文档","children":[]}]},{"level":2,"title":"后语","slug":"后语","link":"#后语","children":[]}],"git":{"createdTime":1730114142000,"updatedTime":1730114142000,"contributors":[{"name":"yimo","email":"yimo@wikiglobal.com","commits":1}]},"readingTime":{"minutes":3.22,"words":965},"filePathRelative":"posts/docker/devops_dns_docker_bind_install.md","localizedDate":"2023年11月4日","excerpt":"<h2>前言</h2>\\n<blockquote>\\n<p>前面使用 nginx 代理转发了几个域名到服务器，但是每次添加一个域名都需要在客户端添加一行 hosts 文件，无疑是繁琐的，其中也提到可以使用 DNS 来实现自动解析域名 到指定服务器的功能，本篇将介绍开源 DNS 服务 docker-bind 的部署和使用</p>\\n</blockquote>\\n<h3>特点</h3>\\n<ul>\\n<li>docker-bind 是一个基于 BIND 与 Webmin 构建的 DNS 服务镜像</li>\\n<li>BIND 是实现互联网域名系统 （DNS） 协议的开源软件，用于搭建 DNS 服务。</li>\\n<li>Webmin 是一款开源的Web界面管理工具，用于浏览器远程管理服务器</li>\\n<li>开源免费， 配置丰富（复杂），成熟稳定，中文主题支持有限，提供了一些服务器管理功能（监控，远程命令等），资源占用和安全性在使用时需要注意</li>\\n</ul>","autoDesc":true}');export{S as comp,x as data};
